/* ==========================================================
 * Проект: MOYAMOVA
 * Файл: overrides.css
 * Назначение: Точечные правки layout для разных окружений
 *             (PWA / iOS Safari) поверх theme.light.css
 *             и theme.dark.css
 * Важно: подключать ПОСЛЕ файлов тем.
 * Обновлено: 2025-11-21
 * ========================================================== */

/* ----------------------------------------------------------
 * 1. Нормализация высоты через 100dvh
 *
 * Во многих мобильных браузерах (включая iOS) 100vh
 * считает высоту вместе с тулбарами. 100dvh ближе к
 * «реальной видимой высоте окна».
 *
 * Здесь мы просто переопределяем height у #app.content,
 * чтобы шапка + контент + футер занимали предсказуемое
 * пространство.
 * ---------------------------------------------------------- */
@supports (height: 100dvh){
  #app.content{
    height: calc(100dvh - var(--header-h-actual) - var(--footer-h-actual));
  }
}

/* ----------------------------------------------------------
 * 2. PWA (standalone) — больше воздуха ТОЛЬКО на главной
 *    странице (home).
 *
 * Базовый padding-top у #app.content остаётся 8px (как
 * задано в theme.light.css / theme.dark.css), а здесь
 * мы добавляем дополнительный отступ только для .home.
 *
 * Итого в PWA:
 *   главный экран: 8px (#app.content) + 40px (.home) ≈ 48px визуально;
 *   словари/избранное/ошибки/статистика: остаются с 8px (правило не
 *   срабатывает, потому что там нет .home внутри #app.content).
 * ---------------------------------------------------------- */
html.is-pwa #app.content > .home{
  /* top = 40, left/right = 10, bottom = 0
     (лево/право совпадает с базовым .home { padding:0 10px; }) */
  padding:40px 10px 0;
}

/* ----------------------------------------------------------
 * 3. iOS Safari — чуть больше отступ снизу.
 *
 * Нужно, чтобы тренер/подсказки не прижимались к нижнему
 * тулбару и зоне жестов (home-bar).
 *
 * Здесь мы НЕ трогаем padding-top, только увеличиваем
 * padding-bottom у #app.content, учитывая:
 *   - высоту футера (footer-h-actual),
 *   - safe-area снизу (safe-bottom),
 *   - небольшой запас (6px).
 * ---------------------------------------------------------- */
html.is-ios-safari #app.content{
  padding-bottom: calc(
    var(--footer-h-actual, 60px)   /* как задано в теме */
    + var(--safe-bottom, 0px)      /* учёт home-бара */
    + 16px                          /* небольшой визуальный запас */
  );
}
